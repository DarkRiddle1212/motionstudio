import{r as e,j as r}from"./chunk-CJk5566G.js";import{E as t,L as a}from"./chunk-6oSn1JRi.js";const n=({direction:e})=>r.jsx("svg",{className:"w-4 h-4 ml-1 inline-block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:"asc"===e?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):"desc"===e?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}):r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),l=({checked:e,indeterminate:t,onChange:a,label:n})=>r.jsx("label",{className:"inline-flex items-center cursor-pointer",children:r.jsx("input",{type:"checkbox",checked:e,ref:e=>{e&&(e.indeterminate=t||!1)},onChange:e=>a(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2","aria-label":n})});function o({data:o,columns:s,loading:i=!1,error:c=null,onRetry:d,pagination:h,sorting:m,selectable:u=!1,selectedIds:p=[],onSelectionChange:g,emptyMessage:x="No data available",rowClassName:b,onRowClick:y,itemHeight:f=60,containerHeight:v=400,overscan:w=5}){const[N,k]=e.useState({column:null,direction:null}),C=m||{column:N.column,direction:N.direction,onSort:(e,r)=>k({column:e,direction:r})},L=e.useCallback(e=>{let r="asc";C.column===e&&("asc"===C.direction?r="desc":"desc"===C.direction&&(r=null)),C.onSort(e,r)},[C]),M=e.useMemo(()=>{if(m||!N.column||!N.direction)return o;const e=s.find(e=>e.id===N.column);return e?[...o].sort((r,t)=>{const a=e.accessor,n="function"==typeof a?a(r):r[a],l="function"==typeof a?a(t):t[a];if(n===l)return 0;if(null==n)return 1;if(null==l)return-1;const o=n<l?-1:1;return"asc"===N.direction?o:-o}):o},[o,N,m,s]),{scrollElementRef:j,totalHeight:S,visibleItems:W,handleScroll:$,offsetY:H}=function({items:r,itemHeight:t=60,containerHeight:a=400,overscan:n=5}){const[l,o]=e.useState(0),s=e.useRef(null),i=r.length*t,c=Math.max(0,Math.floor(l/t)-n),d=Math.min(r.length-1,Math.ceil((l+a)/t)+n),h=e.useMemo(()=>r.slice(c,d+1).map((e,r)=>({item:e,index:c+r})),[r,c,d]),m=e.useCallback(e=>{o(e.currentTarget.scrollTop)},[]);return{scrollElementRef:s,totalHeight:i,visibleItems:h,startIndex:c,handleScroll:m,offsetY:c*t}}({items:M,itemHeight:f,containerHeight:v,overscan:w}),B=e.useMemo(()=>o.length>0&&o.every(e=>p.includes(e.id)),[o,p]),R=e.useMemo(()=>o.some(e=>p.includes(e.id))&&!B,[o,p,B]),z=e.useCallback(e=>{if(g)if(e){const e=[...new Set([...p,...o.map(e=>e.id)])];g(e)}else{const e=new Set(o.map(e=>e.id));g(p.filter(r=>!e.has(r)))}},[o,p,g]),I=e.useCallback((e,r)=>{g&&g(r?[...p,e]:p.filter(r=>r!==e))},[p,g]),V=(e,t)=>{const a=t.accessor,n="function"==typeof a?a(e):e[a];return t.render?t.render(n,e):null==n?r.jsx("span",{className:"text-gray-400",children:"—"}):n},A=e=>{switch(e){case"center":return"text-center";case"right":return"text-right";default:return"text-left"}};return o.length<=100?null:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[c&&r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx(t,{message:c,onRetry:d,type:"error"})}),i&&!c&&r.jsx(a,{message:"Loading data...",size:"md",className:"py-12"}),!i&&!c&&r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsx("table",{className:"min-w-full",children:r.jsx("thead",{children:r.jsxs("tr",{children:[u&&r.jsx("th",{className:"px-3 sm:px-4 py-3 w-12",children:r.jsx(l,{checked:B,indeterminate:R,onChange:z,label:"Select all rows"})}),s.map(e=>r.jsx("th",{className:`px-3 sm:px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wider ${A(e.align)} ${e.hiddenOnMobile?"hidden md:table-cell":""}`,style:{width:e.width},children:e.sortable?r.jsxs("button",{onClick:()=>L(e.id),className:"inline-flex items-center hover:text-gray-900 transition-colors group",children:[r.jsx("span",{className:"truncate",children:e.header}),r.jsx(n,{direction:C.column===e.id?C.direction:null})]}):r.jsx("span",{className:"truncate",children:e.header})},e.id))]})})})})}),r.jsx("div",{ref:j,className:"overflow-auto",style:{height:v},onScroll:$,children:r.jsx("div",{style:{height:S,position:"relative"},children:r.jsx("div",{style:{transform:`translateY(${H}px)`},children:r.jsx("table",{className:"min-w-full",children:r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===M.length?r.jsx("tr",{children:r.jsx("td",{colSpan:s.length+(u?1:0),className:"px-4 py-12 text-center text-gray-500",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),r.jsx("p",{className:"text-sm sm:text-base",children:x})]})})}):W.map(({item:e,index:t})=>r.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${y?"cursor-pointer":""} ${b?b(e):""}`,style:{height:f},onClick:()=>null==y?void 0:y(e),children:[u&&r.jsx("td",{className:"px-3 sm:px-4 py-4",onClick:e=>e.stopPropagation(),children:r.jsx(l,{checked:p.includes(e.id),onChange:r=>I(e.id,r),label:`Select row ${e.id}`})}),s.map(t=>r.jsx("td",{className:`px-3 sm:px-4 py-4 text-sm text-gray-900 ${A(t.align)} ${t.hiddenOnMobile?"hidden md:table-cell":""}`,children:r.jsx("div",{className:"truncate max-w-xs sm:max-w-sm lg:max-w-none",children:V(e,t)})},t.id))]},e.id))})})})})})]}),h&&!i&&!c&&r.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 flex flex-col sm:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 text-sm",children:[r.jsxs("span",{className:"text-gray-700 whitespace-nowrap",children:["Showing ",r.jsx("span",{className:"font-medium",children:(h.page-1)*h.pageSize+1})," to"," ",r.jsx("span",{className:"font-medium",children:Math.min(h.page*h.pageSize,h.totalItems)})," of"," ",r.jsx("span",{className:"font-medium",children:h.totalItems})," results"]}),h.onPageSizeChange&&r.jsx("select",{value:h.pageSize,onChange:e=>{var r;return null==(r=h.onPageSizeChange)?void 0:r.call(h,Number(e.target.value))},className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:(h.pageSizeOptions||[10,25,50,100]).map(e=>r.jsxs("option",{value:e,children:[e," per page"]},e))})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[r.jsx("button",{onClick:()=>h.onPageChange(1),disabled:1===h.page,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"First page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),r.jsx("button",{onClick:()=>h.onPageChange(h.page-1),disabled:1===h.page,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("span",{className:"px-2 sm:px-3 py-1 text-sm text-gray-700 whitespace-nowrap",children:["Page ",h.page," of ",Math.ceil(h.totalItems/h.pageSize)]}),r.jsx("button",{onClick:()=>h.onPageChange(h.page+1),disabled:h.page>=Math.ceil(h.totalItems/h.pageSize),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsx("button",{onClick:()=>h.onPageChange(Math.ceil(h.totalItems/h.pageSize)),disabled:h.page>=Math.ceil(h.totalItems/h.pageSize),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Last page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})]})}const s=({direction:e})=>r.jsx("svg",{className:"w-4 h-4 ml-1 inline-block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:"asc"===e?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):"desc"===e?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}):r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),i=({checked:e,indeterminate:t,onChange:a,label:n})=>r.jsx("label",{className:"inline-flex items-center cursor-pointer",children:r.jsx("input",{type:"checkbox",checked:e,ref:e=>{e&&(e.indeterminate=t||!1)},onChange:e=>a(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2","aria-label":n})}),c=({columns:e,selectable:t})=>r.jsxs("tr",{className:"animate-pulse",children:[t&&r.jsx("td",{className:"px-4 py-4",children:r.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"})}),Array.from({length:e}).map((e,t)=>r.jsx("td",{className:"px-4 py-4",children:r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})},t))]});function d({data:n,columns:l,loading:d=!1,error:h=null,onRetry:m,pagination:u,sorting:p,selectable:g=!1,selectedIds:x=[],onSelectionChange:b,emptyMessage:y="No data available",rowClassName:f,onRowClick:v,enableVirtualization:w=!0,virtualizationThreshold:N=100}){const[k,C]=e.useState({column:null,direction:null}),L=p||{column:k.column,direction:k.direction,onSort:(e,r)=>C({column:e,direction:r})};if(w&&n.length>N)return r.jsx(o,{data:n,columns:l,loading:d,error:h,onRetry:m,pagination:u,sorting:p,selectable:g,selectedIds:x,onSelectionChange:b,emptyMessage:y,rowClassName:f,onRowClick:v});const M=e.useCallback(e=>{let r="asc";L.column===e&&("asc"===L.direction?r="desc":"desc"===L.direction&&(r=null)),L.onSort(e,r)},[L]),j=e.useMemo(()=>{if(p||!k.column||!k.direction)return n;const e=l.find(e=>e.id===k.column);return e?[...n].sort((r,t)=>{const a=e.accessor,n="function"==typeof a?a(r):r[a],l="function"==typeof a?a(t):t[a];if(n===l)return 0;if(null==n)return 1;if(null==l)return-1;const o=n<l?-1:1;return"asc"===k.direction?o:-o}):n},[n,k,p,l]),S=e.useMemo(()=>n.length>0&&n.every(e=>x.includes(e.id)),[n,x]),W=e.useMemo(()=>n.some(e=>x.includes(e.id))&&!S,[n,x,S]),$=e.useCallback(e=>{if(b)if(e){const e=[...new Set([...x,...n.map(e=>e.id)])];b(e)}else{const e=new Set(n.map(e=>e.id));b(x.filter(r=>!e.has(r)))}},[n,x,b]),H=e.useCallback((e,r)=>{b&&b(r?[...x,e]:x.filter(r=>r!==e))},[x,b]),B=(e,t)=>{const a=t.accessor,n="function"==typeof a?a(e):e[a];return t.render?t.render(n,e):null==n?r.jsx("span",{className:"text-gray-400",children:"—"}):n},R=u?Math.ceil(u.totalItems/u.pageSize):1,z=u?(u.page-1)*u.pageSize+1:1,I=u?Math.min(u.page*u.pageSize,u.totalItems):n.length,V=e=>{switch(e){case"center":return"text-center";case"right":return"text-right";default:return"text-left"}};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.length>N&&!w&&r.jsx("div",{className:"px-4 py-2 bg-yellow-50 border-b border-yellow-200 text-sm text-yellow-800",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Large dataset detected (",n.length," items). Consider enabling virtualization for better performance."]})}),h&&r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx(t,{message:h,onRetry:m,type:"error"})}),d&&!h&&r.jsx(a,{message:"Loading data...",size:"md",className:"py-12"}),!d&&!h&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[g&&r.jsx("th",{className:"px-3 sm:px-4 py-3 w-12",children:r.jsx(i,{checked:S,indeterminate:W,onChange:$,label:"Select all rows"})}),l.map(e=>r.jsx("th",{className:`px-3 sm:px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wider ${V(e.align)} ${e.hiddenOnMobile?"hidden md:table-cell":""}`,style:{width:e.width},children:e.sortable?r.jsxs("button",{onClick:()=>M(e.id),className:"inline-flex items-center hover:text-gray-900 transition-colors group",children:[r.jsx("span",{className:"truncate",children:e.header}),r.jsx(s,{direction:L.column===e.id?L.direction:null})]}):r.jsx("span",{className:"truncate",children:e.header})},e.id))]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?Array.from({length:5}).map((e,t)=>r.jsx(c,{columns:l.length,selectable:g},t)):0===j.length?r.jsx("tr",{children:r.jsx("td",{colSpan:l.length+(g?1:0),className:"px-4 py-12 text-center text-gray-500",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),r.jsx("p",{className:"text-sm sm:text-base",children:y})]})})}):j.map(e=>r.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${v?"cursor-pointer":""} ${f?f(e):""}`,onClick:()=>null==v?void 0:v(e),children:[g&&r.jsx("td",{className:"px-3 sm:px-4 py-4",onClick:e=>e.stopPropagation(),children:r.jsx(i,{checked:x.includes(e.id),onChange:r=>H(e.id,r),label:`Select row ${e.id}`})}),l.map(t=>r.jsx("td",{className:`px-3 sm:px-4 py-4 text-sm text-gray-900 ${V(t.align)} ${t.hiddenOnMobile?"hidden md:table-cell":""}`,children:r.jsx("div",{className:"truncate max-w-xs sm:max-w-sm lg:max-w-none",children:B(e,t)})},t.id))]},e.id))})]})}),u&&!d&&!h&&r.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 flex flex-col sm:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 text-sm",children:[r.jsxs("span",{className:"text-gray-700 whitespace-nowrap",children:["Showing ",r.jsx("span",{className:"font-medium",children:z})," to"," ",r.jsx("span",{className:"font-medium",children:I})," of"," ",r.jsx("span",{className:"font-medium",children:u.totalItems})," results"]}),u.onPageSizeChange&&r.jsx("select",{value:u.pageSize,onChange:e=>{var r;return null==(r=u.onPageSizeChange)?void 0:r.call(u,Number(e.target.value))},className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:(u.pageSizeOptions||[10,25,50,100]).map(e=>r.jsxs("option",{value:e,children:[e," per page"]},e))})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[r.jsx("button",{onClick:()=>u.onPageChange(1),disabled:1===u.page,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"First page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),r.jsx("button",{onClick:()=>u.onPageChange(u.page-1),disabled:1===u.page,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("span",{className:"px-2 sm:px-3 py-1 text-sm text-gray-700 whitespace-nowrap",children:["Page ",u.page," of ",R]}),r.jsx("button",{onClick:()=>u.onPageChange(u.page+1),disabled:u.page>=R,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsx("button",{onClick:()=>u.onPageChange(R),disabled:u.page>=R,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Last page",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})]})}export{d as D};
