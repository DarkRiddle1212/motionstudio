import{r as e,a as r,j as a,L as t,u as n,b as i}from"./chunk-CJk5566G.js";import{u as s,F as l,C as d,c,e as o,I as m}from"./chunk-6oSn1JRi.js";import"./chunk-CHwTWNu0.js";import"./chunk-C_3zi0wr.js";import"./chunk-BXbIpaFw.js";import"./chunk-B2YaEX5v.js";import"./chunk-BzhC-wyg.js";const h=()=>{const[n,i]=e.useState({email:"",password:"",firstName:"",lastName:""}),[h,u]=e.useState({}),[p,x]=e.useState(!1),[b,y]=e.useState(!1),{signup:f}=s(),v=r(),g=e=>{const{name:r,value:a}=e.target;i(e=>({...e,[r]:a})),h[r]&&u(e=>({...e,[r]:""}))};return b?a.jsx("div",{className:"min-h-screen bg-brand-primary-bg flex items-center justify-center p-4",children:a.jsx(l,{children:a.jsxs(d,{variant:"elevated",className:"w-full max-w-md p-8 text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-brand-accent rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-brand-primary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-2xl font-serif text-brand-primary-text mb-2",children:"Check Your Email"}),a.jsxs("p",{className:"text-brand-secondary-text",children:["We've sent a verification link to ",a.jsx("strong",{children:n.email}),". Please check your email and click the link to verify your account."]})]}),a.jsx(c,{variant:"primary",fullWidth:!0,onClick:()=>v("/login"),children:"Go to Login"})]})})}):a.jsx("div",{className:"min-h-screen bg-brand-primary-bg flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx(l,{delay:.2,children:a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-serif text-brand-primary-text mb-2",children:"Join Motion Design Studio"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Create your account to start learning motion design"})]})}),a.jsx(o,{delay:.4,children:a.jsxs(d,{variant:"elevated",className:"p-8",children:[a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(e.email="Please enter a valid email address"):e.email="Email is required",n.password?n.password.length<8?e.password="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(n.password)||(e.password="Password must contain at least one uppercase letter, one lowercase letter, and one number"):e.password="Password is required",u(e),0===Object.keys(e).length})()){x(!0),u({});try{await f(n.email,n.password,n.firstName||void 0,n.lastName||void 0),y(!0)}catch(r){u({submit:r.message})}finally{x(!1)}}},className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(m,{label:"First Name",name:"firstName",type:"text",value:n.firstName,onChange:g,placeholder:"Enter your first name",error:h.firstName}),a.jsx(m,{label:"Last Name",name:"lastName",type:"text",value:n.lastName,onChange:g,placeholder:"Enter your last name",error:h.lastName})]}),a.jsx(m,{label:"Email Address",name:"email",type:"email",value:n.email,onChange:g,placeholder:"Enter your email",error:h.email,fullWidth:!0,required:!0}),a.jsx(m,{label:"Password",name:"password",type:"password",value:n.password,onChange:g,placeholder:"Create a strong password",error:h.password,helperText:"Must be at least 8 characters with uppercase, lowercase, and numbers",fullWidth:!0,required:!0}),h.submit&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:h.submit})}),a.jsx(c,{type:"submit",variant:"primary",fullWidth:!0,isLoading:p,children:"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-brand-secondary-text",children:["Already have an account?"," ",a.jsx(t,{to:"/login",className:"text-brand-accent hover:text-brand-primary-text transition-colors font-medium",children:"Sign in"})]})})]})})]})})},u=()=>{var i,h;const[u,p]=e.useState({email:"",password:""}),[x,b]=e.useState({}),[y,f]=e.useState(!1),{login:v}=s(),g=r(),N=(null==(h=null==(i=n().state)?void 0:i.from)?void 0:h.pathname)||"/dashboard",w=e=>{const{name:r,value:a}=e.target;p(e=>({...e,[r]:a})),x[r]&&b(e=>({...e,[r]:""}))};return a.jsx("div",{className:"min-h-screen bg-brand-primary-bg flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx(l,{delay:.2,children:a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-serif text-brand-primary-text mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Sign in to continue your motion design journey"})]})}),a.jsx(o,{delay:.4,children:a.jsxs(d,{variant:"elevated",className:"p-8",children:[a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return u.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)||(e.email="Please enter a valid email address"):e.email="Email is required",u.password||(e.password="Password is required"),b(e),0===Object.keys(e).length})()){f(!0),b({});try{"admin"===(await v(u.email,u.password)).role?g("/admin",{replace:!0}):g("/dashboard"!==N?N:"/dashboard",{replace:!0})}catch(r){b({submit:r.message})}finally{f(!1)}}},className:"space-y-6",children:[a.jsx(m,{label:"Email Address",name:"email",type:"email",value:u.email,onChange:w,placeholder:"Enter your email",error:x.email,fullWidth:!0,required:!0}),a.jsx(m,{label:"Password",name:"password",type:"password",value:u.password,onChange:w,placeholder:"Enter your password",error:x.password,fullWidth:!0,required:!0}),x.submit&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:x.submit})}),a.jsx(c,{type:"submit",variant:"primary",fullWidth:!0,isLoading:y,children:"Sign In"})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx(t,{to:"/forgot-password",className:"text-brand-accent hover:text-brand-primary-text transition-colors text-sm",children:"Forgot your password?"})}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-brand-secondary-text",children:["Don't have an account?"," ",a.jsx(t,{to:"/signup",className:"text-brand-accent hover:text-brand-primary-text transition-colors font-medium",children:"Sign up"})]})})]})]})})]})})},p=()=>{const[t]=i(),[n,o]=e.useState("loading"),[m,h]=e.useState(""),{verifyEmail:u}=s(),p=r(),x=t.get("token");return e.useEffect(()=>{(async()=>{if(!x)return o("error"),void h("Invalid verification link. Please check your email for the correct link.");try{await u(x),o("success"),h("Your email has been successfully verified! You can now sign in to your account.")}catch(e){o("error"),h(e.message||"Verification failed. The link may be expired or invalid.")}})()},[x,u]),a.jsx("div",{className:"min-h-screen bg-brand-primary-bg flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx(l,{children:a.jsx("div",{className:"text-center mb-8",children:a.jsx("h1",{className:"text-3xl font-serif text-brand-primary-text mb-2",children:"Motion Design Studio"})})}),a.jsx(l,{delay:.3,children:a.jsx(d,{variant:"elevated",className:"p-8",children:(()=>{switch(n){case"loading":return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-accent border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-serif text-brand-primary-text mb-2",children:"Verifying Your Email"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Please wait while we verify your email address..."})]});case"success":return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-2xl font-serif text-brand-primary-text mb-2",children:"Email Verified!"}),a.jsx("p",{className:"text-brand-secondary-text mb-6",children:m}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(c,{variant:"primary",fullWidth:!0,onClick:()=>p("/login"),children:"Sign In Now"}),a.jsx(c,{variant:"tertiary",fullWidth:!0,onClick:()=>p("/"),children:"Go to Home"})]})]});case"error":return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h2",{className:"text-2xl font-serif text-brand-primary-text mb-2",children:"Verification Failed"}),a.jsx("p",{className:"text-brand-secondary-text mb-6",children:m}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(c,{variant:"primary",fullWidth:!0,onClick:()=>p("/signup"),children:"Sign Up Again"}),a.jsx(c,{variant:"tertiary",fullWidth:!0,onClick:()=>p("/login"),children:"Try to Sign In"})]})]});default:return null}})()})})]})})};export{u as Login,h as SignUp,p as VerifyEmail};
