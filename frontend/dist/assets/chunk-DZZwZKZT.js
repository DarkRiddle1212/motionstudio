import{a as e,r as t,j as a,c as s}from"./chunk-CJk5566G.js";import{u as r,I as n,a as l}from"./chunk-ugW3LGYP.js";import{F as i,c,C as d,I as m,T as o,u as x,e as h,h as b,d as u,P as p}from"./chunk-6oSn1JRi.js";const f="http://localhost:5000/api",y=Object.freeze(Object.defineProperty({__proto__:null,CourseBuilderPage:()=>{const s=e(),{createCourse:n}=r(),[l,x]=t.useState({title:"",description:"",duration:"",pricing:"0",currency:"USD",curriculum:"",introVideoUrl:"",thumbnailUrl:""}),[h,b]=t.useState({}),[u,p]=t.useState(!1),f=e=>{const{name:t,value:a}=e.target;x(e=>({...e,[t]:a})),h[t]&&b(e=>({...e,[t]:""}))};return a.jsxs("div",{className:"min-h-screen bg-brand-primary-bg",children:[a.jsx("div",{className:"bg-brand-secondary-bg border-b border-brand-secondary-text/20",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:a.jsx(i,{children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-serif font-bold text-brand-primary-text mb-2",children:"Create New Course"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Fill in the details below to create your course"})]}),a.jsx(c,{variant:"tertiary",onClick:()=>s("/instructor/courses"),className:"self-start sm:self-auto",children:"Cancel"})]})})})}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:a.jsx(i,{delay:.2,children:a.jsx(d,{children:a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};l.title.trim()||(e.title="Title is required"),l.description.trim()||(e.description="Description is required"),l.duration.trim()||(e.duration="Duration is required"),l.curriculum.trim()||(e.curriculum="Curriculum is required");const t=parseFloat(l.pricing);return(isNaN(t)||t<0)&&(e.pricing="Pricing must be a valid number (0 for free)"),b(e),0===Object.keys(e).length})()){p(!0),b({});try{const e={title:l.title.trim(),description:l.description.trim(),duration:l.duration.trim(),pricing:parseFloat(l.pricing),currency:l.currency,curriculum:l.curriculum.trim(),introVideoUrl:l.introVideoUrl.trim()||void 0,thumbnailUrl:l.thumbnailUrl.trim()||void 0},t=await n(e);s(`/instructor/courses/${t.id}`)}catch(t){b({submit:t.message})}finally{p(!1)}}},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl font-serif font-semibold text-brand-primary-text mb-4",children:"Basic Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(m,{label:"Course Title",name:"title",type:"text",value:l.title,onChange:f,placeholder:"e.g., Introduction to Motion Design",error:h.title,required:!0,fullWidth:!0}),a.jsx(o,{label:"Course Description",name:"description",value:l.description,onChange:f,placeholder:"Provide a brief description of what students will learn...",error:h.description,rows:4,required:!0,fullWidth:!0}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(m,{label:"Duration",name:"duration",type:"text",value:l.duration,onChange:f,placeholder:"e.g., 4 weeks, 10 hours",error:h.duration,required:!0}),a.jsx(m,{label:"Pricing",name:"pricing",type:"number",value:l.pricing,onChange:f,placeholder:"0 for free course",error:h.pricing,helperText:"Enter 0 for a free course",required:!0})]}),a.jsx(m,{label:"Currency",name:"currency",type:"text",value:l.currency,onChange:f,placeholder:"USD",helperText:"e.g., USD, EUR, GBP",fullWidth:!0})]})]}),a.jsxs("div",{className:"pt-6 border-t border-brand-secondary-text/20",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-serif font-semibold text-brand-primary-text mb-4",children:"Curriculum"}),a.jsx(o,{label:"Course Curriculum",name:"curriculum",value:l.curriculum,onChange:f,placeholder:"Outline the course structure, topics covered, and learning objectives...",error:h.curriculum,rows:8,helperText:"Provide a detailed curriculum that students will follow",required:!0,fullWidth:!0})]}),a.jsxs("div",{className:"pt-6 border-t border-brand-secondary-text/20",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-serif font-semibold text-brand-primary-text mb-4",children:"Media (Optional)"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(m,{label:"Intro Video URL",name:"introVideoUrl",type:"url",value:l.introVideoUrl,onChange:f,placeholder:"https://example.com/video.mp4",helperText:"URL to an introductory video for the course",fullWidth:!0}),a.jsx(m,{label:"Thumbnail URL",name:"thumbnailUrl",type:"url",value:l.thumbnailUrl,onChange:f,placeholder:"https://example.com/thumbnail.jpg",helperText:"URL to a course thumbnail image",fullWidth:!0})]})]}),h.submit&&a.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-600",children:h.submit})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-4 pt-6 border-t border-brand-secondary-text/20",children:[a.jsx(c,{type:"button",variant:"tertiary",onClick:()=>s("/instructor/courses"),className:"w-full sm:w-auto",children:"Cancel"}),a.jsx(c,{type:"submit",variant:"primary",isLoading:u,disabled:u,className:"w-full sm:w-auto",children:"Create Course"})]})]})})})})]})},InstructorDashboard:()=>{const s=e(),{token:r}=x(),[l,m]=t.useState([]),[o,u]=t.useState({totalCourses:0,totalStudents:0,totalRevenue:0,pendingSubmissions:0}),[p,f]=t.useState(!0),[y,N]=t.useState(null);t.useEffect(()=>{r&&v()},[r]);const v=async()=>{var e,t,a;try{f(!0),N(null);const s=await fetch("http://localhost:5000/api/instructor/courses",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(s.ok){const r=await s.json();m(r.courses||[]);const n=(null==(e=r.courses)?void 0:e.reduce((e,t)=>e+t.t.enrollments,0))||0,l=(null==(t=r.courses)?void 0:t.reduce((e,t)=>e+t.pricing*t.t.enrollments,0))||0;u({totalCourses:(null==(a=r.courses)?void 0:a.length)||0,totalStudents:n,totalRevenue:l,pendingSubmissions:0})}}catch(s){N(s instanceof Error?s.message:"Failed to fetch dashboard data")}finally{f(!1)}},g=()=>{s("/instructor/courses/new")},w=e=>{s(`/instructor/courses/${e}`)};return p?a.jsx(n,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-accent mx-auto mb-4"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Loading dashboard..."})]})})}):y?a.jsx(n,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsx("h2",{className:"text-xl font-semibold text-brand-primary-text mb-2 font-serif",children:"Unable to Load Dashboard"}),a.jsx("p",{className:"text-brand-secondary-text mb-6",children:y}),a.jsx(c,{onClick:()=>window.location.reload(),children:"Try Again"})]})})}):a.jsx(n,{children:a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[a.jsx(i,{children:a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-serif font-bold text-brand-primary-text mb-2",children:"Instructor Dashboard"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Manage your courses, track student progress, and review submissions"})]})}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx(h,{delay:.1,children:a.jsx(d,{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-brand-accent mb-1",children:o.totalCourses}),a.jsx("div",{className:"text-xs sm:text-sm text-brand-secondary-text",children:"Total Courses"})]})})}),a.jsx(h,{delay:.2,children:a.jsx(d,{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-brand-accent mb-1",children:o.totalStudents}),a.jsx("div",{className:"text-xs sm:text-sm text-brand-secondary-text",children:"Total Students"})]})})}),a.jsx(h,{delay:.3,children:a.jsx(d,{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-brand-accent mb-1",children:["$",o.totalRevenue.toFixed(0)]}),a.jsx("div",{className:"text-xs sm:text-sm text-brand-secondary-text",children:"Total Revenue"})]})})}),a.jsx(h,{delay:.4,children:a.jsx(d,{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-brand-accent mb-1",children:o.pendingSubmissions}),a.jsx("div",{className:"text-xs sm:text-sm text-brand-secondary-text",children:"Pending Reviews"})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx(h,{delay:.5,children:a.jsxs(d,{className:"p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"Create New Course"}),a.jsx("p",{className:"text-sm text-brand-secondary-text mb-4",children:"Start building a new course for your students"}),a.jsx(c,{variant:"primary",size:"sm",onClick:g,children:"Create Course"})]})}),a.jsx(h,{delay:.6,children:a.jsxs(d,{className:"p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"Review Submissions"}),a.jsx("p",{className:"text-sm text-brand-secondary-text mb-4",children:"Check and provide feedback on student work"}),a.jsx(c,{variant:"secondary",size:"sm",onClick:()=>s("/instructor/submissions"),children:"View Submissions"})]})}),a.jsx(h,{delay:.7,children:a.jsxs(d,{className:"p-4 sm:p-6 sm:col-span-2 lg:col-span-1",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"Manage Students"}),a.jsx("p",{className:"text-sm text-brand-secondary-text mb-4",children:"View enrolled students and their progress"}),a.jsx(c,{variant:"tertiary",size:"sm",onClick:()=>s("/instructor/students"),children:"View Students"})]})})]}),a.jsx(h,{delay:.8,children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-serif text-brand-primary-text mb-2 sm:mb-0",children:["My Courses (",l.length,")"]}),a.jsx(c,{variant:"secondary",size:"sm",onClick:()=>s("/instructor/courses"),children:"View All Courses"})]}),0===l.length?a.jsxs(d,{className:"p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"text-brand-secondary-text mb-4",children:a.jsx("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"No courses yet"}),a.jsx("p",{className:"text-sm sm:text-base text-brand-secondary-text mb-6",children:"Create your first course to start teaching students"}),a.jsx(c,{onClick:g,children:"Create Your First Course"})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:l.slice(0,6).map((e,t)=>a.jsx(h,{delay:.9+.1*t,children:a.jsxs(d,{className:"p-4 sm:p-6 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>w(e.id),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text font-semibold line-clamp-2",children:e.title}),a.jsx(b,{variant:e.isPublished?"success":"default",className:"ml-2 flex-shrink-0",children:e.isPublished?"Published":"Draft"})]}),a.jsx("p",{className:"text-sm text-brand-secondary-text mb-4 line-clamp-2",children:e.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs sm:text-sm text-brand-secondary-text mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-brand-primary-text",children:e.t.enrollments}),a.jsx("div",{children:"Students"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-brand-primary-text",children:e.t.lessons}),a.jsx("div",{children:"Lessons"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-brand-primary-text",children:e.t.assignments}),a.jsx("div",{children:"Assignments"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-brand-secondary-text",children:0===e.pricing?"Free":`$${e.pricing}`}),a.jsx(c,{variant:"tertiary",size:"sm",onClick:t=>{t.stopPropagation(),w(e.id)},children:"Manage"})]})]})},e.id))})]})})]})})},SubmissionReview:()=>{const{assignmentId:r}=s(),n=e(),{token:l}=x(),[m,p]=t.useState(null),[y,N]=t.useState([]),[v,g]=t.useState(!0),[w,C]=t.useState(null),[k,j]=t.useState(null),[S,z]=t.useState(!1),[D,F]=t.useState(!1),[R,T]=t.useState(""),[$,M]=t.useState(void 0),[B,U]=t.useState({});t.useEffect(()=>{r&&l&&V()},[r,l]);const V=async()=>{try{g(!0),C(null);const e=await fetch(`${f}/assignments/${r}`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to fetch assignment")}const t=await e.json();p(t.assignment);const a=await fetch(`${f}/assignments/${r}/submissions`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!a.ok){const e=await a.json();throw new Error(e.error||"Failed to fetch submissions")}const s=await a.json();N(s.submissions)}catch(e){C(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}},O=()=>{(null==m?void 0:m.course.id)?n(`/courses/${m.course.id}/content`):n("/dashboard")},P=e=>{switch(e){case"reviewed":return"success";case"late":return"warning";default:return"default"}},L=e=>new Date(e).toLocaleString();return v?a.jsx("div",{className:"min-h-screen bg-brand-primary-bg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{"data-testid":"loading-spinner",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-accent mx-auto mb-4"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Loading submissions..."})]})}):w?a.jsx("div",{className:"min-h-screen bg-brand-primary-bg flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsx("h2",{className:"text-xl font-semibold text-brand-primary-text mb-2 font-serif",children:"Unable to Load Submissions"}),a.jsx("p",{className:"text-brand-secondary-text mb-6",children:w}),a.jsx(c,{onClick:O,children:"Back to Course"})]})}):m?a.jsx("div",{className:"min-h-screen bg-brand-primary-bg",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsx(i,{children:a.jsxs("div",{className:"mb-8",children:[a.jsx(c,{variant:"tertiary",onClick:O,className:"mb-4 text-brand-accent hover:text-brand-accent",children:"â† Back to Course"}),a.jsx("div",{className:"flex items-start justify-between mb-6",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold text-brand-primary-text font-serif mb-2",children:"Review Submissions"}),a.jsx("h2",{className:"text-xl text-brand-secondary-text mb-4",children:m.title}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-brand-secondary-text",children:[a.jsxs("span",{children:["ðŸ“š ",m.course.title]}),a.jsxs("span",{children:["ðŸ“… Due: ",new Date(m.deadline).toLocaleDateString()]}),a.jsxs("span",{children:["ðŸ“ ",y.length," submissions"]})]})]})})]})}),a.jsx("div",{className:"space-y-6",children:0===y.length?a.jsx(h,{children:a.jsx(d,{children:a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-brand-secondary-text mb-4",children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),a.jsx("h3",{className:"text-lg font-semibold text-brand-primary-text mb-2 font-serif",children:"No Submissions Yet"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Students haven't submitted any work for this assignment yet."})]})})}):y.map((e,t)=>{return a.jsx(h,{delay:.1*t,children:a.jsx(d,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsxs("h3",{className:"text-lg font-semibold text-brand-primary-text font-serif",children:[e.student.firstName," ",e.student.lastName]}),a.jsx(b,{variant:P(e.status),children:"submitted"===e.status?"âœ“ Submitted":"late"===e.status?"âš  Late":"reviewed"===e.status?"âœ“ Reviewed":e.status}),(s=e.submittedAt,r=m.deadline,new Date(s)>new Date(r)&&a.jsx(b,{variant:"warning",children:"Late"}))]}),a.jsx("p",{className:"text-brand-secondary-text mb-2",children:e.student.email}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-brand-secondary-text",children:[a.jsxs("span",{children:["ðŸ“… Submitted: ",L(e.submittedAt)]}),a.jsxs("span",{className:"capitalize",children:["ðŸ“Ž ",e.submissionType]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[e.fileUrl&&a.jsx(c,{variant:"tertiary",size:"sm",onClick:()=>window.open(e.fileUrl,"_blank"),className:"text-brand-accent hover:text-brand-accent",children:"View File"}),e.linkUrl&&a.jsx(c,{variant:"tertiary",size:"sm",onClick:()=>window.open(e.linkUrl,"_blank"),className:"text-brand-accent hover:text-brand-accent",children:"Open Link"}),a.jsx(c,{variant:"secondary",size:"sm",onClick:()=>(e=>{j(e),T(""),M(void 0),U({}),z(!0)})(e),children:e.feedback.length>0?"View Feedback":"Add Feedback"})]})]}),e.feedback.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-accent border-opacity-20",children:[a.jsx("h4",{className:"text-md font-semibold text-brand-primary-text font-serif mb-3",children:"Feedback"}),e.feedback.map(e=>a.jsxs("div",{className:"bg-brand-secondary-bg rounded-lg p-4 mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-brand-primary-text",children:[e.instructor.firstName," ",e.instructor.lastName]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[e.rating&&a.jsxs("span",{className:"text-sm text-brand-accent font-medium",children:[e.rating,"/5 â­"]}),a.jsx("span",{className:"text-sm text-brand-secondary-text",children:new Date(e.createdAt).toLocaleDateString()})]})]}),a.jsx("p",{className:"text-brand-secondary-text",children:e.comment})]},e.id))]})]})})},e.id);var s,r})}),a.jsx(u,{isOpen:S,onClose:()=>z(!1),title:(null==k?void 0:k.feedback.length)?"View Feedback":"Add Feedback",children:k&&a.jsxs("div",{className:"py-4",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-brand-primary-text font-serif mb-2",children:[k.student.firstName," ",k.student.lastName]}),a.jsxs("p",{className:"text-brand-secondary-text mb-2",children:["Submitted: ",L(k.submittedAt)]}),a.jsxs("div",{className:"flex space-x-2",children:[k.fileUrl&&a.jsx(c,{variant:"tertiary",size:"sm",onClick:()=>window.open(k.fileUrl,"_blank"),className:"text-brand-accent hover:text-brand-accent",children:"View File"}),k.linkUrl&&a.jsx(c,{variant:"tertiary",size:"sm",onClick:()=>window.open(k.linkUrl,"_blank"),className:"text-brand-accent hover:text-brand-accent",children:"Open Link"})]})]}),k.feedback.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-md font-semibold text-brand-primary-text font-serif mb-3",children:"Previous Feedback"}),k.feedback.map(e=>a.jsxs("div",{className:"bg-brand-secondary-bg rounded-lg p-4 mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-brand-primary-text",children:[e.instructor.firstName," ",e.instructor.lastName]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[e.rating&&a.jsxs("span",{className:"text-sm text-brand-accent font-medium",children:[e.rating,"/5 â­"]}),a.jsx("span",{className:"text-sm text-brand-secondary-text",children:new Date(e.createdAt).toLocaleDateString()})]})]}),a.jsx("p",{className:"text-brand-secondary-text",children:e.comment})]},e.id))]}),a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),k&&(()=>{const e={};return R.trim()||(e.comment="Feedback comment is required"),void 0!==$&&($<1||$>5)&&(e.rating="Rating must be between 1 and 5"),U(e),0===Object.keys(e).length})())try{F(!0),C(null);const e={submissionId:k.id,comment:R.trim(),rating:$},t=await fetch(`${f}/feedback`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to submit feedback")}await V(),z(!1),j(null)}catch(t){C(t instanceof Error?t.message:"Failed to submit feedback")}finally{F(!1)}},className:"space-y-4",children:[a.jsx(o,{label:"Feedback Comment",value:R,onChange:e=>T(e.target.value),placeholder:"Provide detailed feedback on the student's submission...",rows:4,error:B.comment,fullWidth:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-brand-primary-text mb-2",children:"Rating (Optional)"}),a.jsxs("div",{className:"flex space-x-2",children:[[1,2,3,4,5].map(e=>a.jsx("button",{type:"button",onClick:()=>M(e),className:"w-8 h-8 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors "+($===e?"border-brand-accent bg-brand-accent text-white":"border-brand-secondary-text text-brand-secondary-text hover:border-brand-accent"),children:e},e)),$&&a.jsx("button",{type:"button",onClick:()=>M(void 0),className:"text-sm text-brand-secondary-text hover:text-brand-accent ml-2",children:"Clear"})]}),B.rating&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:B.rating})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx(c,{type:"button",variant:"secondary",onClick:()=>z(!1),children:"Cancel"}),a.jsx(c,{type:"submit",disabled:D,children:D?"Submitting...":"Submit Feedback"})]})]})]})})]})}):a.jsx("div",{className:"min-h-screen bg-brand-primary-bg flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-brand-secondary-text",children:"Assignment not found"})})})}},Symbol.toStringTag,{value:"Module"})),N=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var t;const{user:s,logout:r}=x(),n=e(),{enrollments:m,loading:o,error:u}=l();return a.jsxs("div",{className:"min-h-screen bg-brand-primary-bg",children:[a.jsx("header",{className:"bg-brand-secondary-bg border-b border-brand-accent border-opacity-20",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{children:a.jsx("h1",{className:"text-lg sm:text-xl font-serif text-brand-primary-text",children:"Motion Design Studio"})}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("span",{className:"hidden sm:block text-brand-secondary-text text-sm",children:["Welcome, ",(null==s?void 0:s.firstName)||(null==s?void 0:s.email)]}),a.jsx("span",{className:"sm:hidden text-brand-secondary-text text-xs",children:(null==s?void 0:s.firstName)||(null==(t=null==s?void 0:s.email)?void 0:t.split("@")[0])}),a.jsxs(c,{variant:"tertiary",size:"sm",onClick:r,children:[a.jsx("span",{className:"hidden sm:inline",children:"Sign Out"}),a.jsx("span",{className:"sm:hidden",children:"Out"})]})]})]})})}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[a.jsx(i,{delay:.2,children:a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-serif text-brand-primary-text mb-2",children:"Welcome to Your Dashboard"}),a.jsx("p",{className:"text-sm sm:text-base text-brand-secondary-text",children:"Track your progress and continue your motion design journey"})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mb-8 sm:mb-12",children:[a.jsx(h,{delay:.4,children:a.jsxs(d,{variant:"elevated",className:"p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"Browse Courses"}),a.jsx("p",{className:"text-sm text-brand-secondary-text mb-4",children:"Discover new motion design courses"}),a.jsx(c,{variant:"primary",size:"sm",onClick:()=>n("/courses"),children:"Browse All"})]})}),a.jsx(h,{delay:.6,children:a.jsxs(d,{variant:"elevated",className:"p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"My Progress"}),a.jsxs("p",{className:"text-sm text-brand-secondary-text mb-4",children:[m.length," course",1!==m.length?"s":""," enrolled"]}),a.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-brand-accent",children:[m.length>0?Math.round(m.reduce((e,t)=>e+t.progressPercentage,0)/m.length):0,"%"]})]})}),a.jsx(h,{delay:.8,children:a.jsxs(d,{variant:"elevated",className:"p-4 sm:p-6 sm:col-span-2 md:col-span-1",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"My Profile"}),a.jsx("p",{className:"text-sm text-brand-secondary-text mb-4",children:"Update your account settings"}),a.jsx(c,{variant:"tertiary",size:"sm",children:"Edit Profile"})]})})]}),a.jsx(h,{delay:1,children:a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("h3",{className:"text-xl sm:text-2xl font-serif text-brand-primary-text mb-4 sm:mb-6",children:["My Courses (",m.length,")"]}),o?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-accent mx-auto mb-4"}),a.jsx("p",{className:"text-brand-secondary-text",children:"Loading your courses..."})]}):u?a.jsxs(d,{className:"p-4 sm:p-6 text-center",children:[a.jsx("p",{className:"text-red-500 mb-4",children:u}),a.jsx(c,{variant:"secondary",size:"sm",onClick:()=>window.location.reload(),children:"Try Again"})]}):0===m.length?a.jsxs(d,{className:"p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"text-brand-secondary-text mb-4",children:a.jsx("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h4",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-2",children:"No courses yet"}),a.jsx("p",{className:"text-sm sm:text-base text-brand-secondary-text mb-6",children:"Start your motion design journey by enrolling in a course"}),a.jsx(c,{onClick:()=>n("/courses"),children:"Browse Courses"})]}):a.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6",children:m.map(e=>a.jsxs(d,{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-1 truncate",children:e.course.title}),a.jsxs("p",{className:"text-xs sm:text-sm text-brand-secondary-text mb-2",children:["by ",e.course.instructor.firstName," ",e.course.instructor.lastName]}),a.jsx("p",{className:"text-xs sm:text-sm text-brand-secondary-text line-clamp-2",children:e.course.description})]}),a.jsx(b,{variant:"completed"===e.status?"success":"default",className:"ml-2 sm:ml-4 flex-shrink-0",children:e.status})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs sm:text-sm text-brand-secondary-text",children:"Progress"}),a.jsxs("span",{className:"text-xs sm:text-sm font-medium text-brand-primary-text",children:[e.progressPercentage,"%"]})]}),a.jsx(p,{value:e.progressPercentage,className:"h-2"})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between text-xs sm:text-sm text-brand-secondary-text mb-4 gap-2",children:[a.jsxs("span",{children:[e.course.t.lessons," lessons"]}),a.jsx("span",{className:"hidden sm:inline",children:e.course.duration}),a.jsxs("span",{className:"text-xs",children:["Enrolled ",new Date(e.enrolledAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[a.jsx(c,{variant:"primary",size:"sm",onClick:()=>n(`/courses/${e.courseId}/content`),className:"flex-1",children:"View Course"}),a.jsxs(c,{variant:"secondary",size:"sm",onClick:()=>{return t=e.courseId,void n(`/courses/${t}`);var t},className:"flex-1 sm:flex-none",children:[a.jsx("span",{className:"hidden sm:inline",children:"Course Details"}),a.jsx("span",{className:"sm:hidden",children:"Details"})]})]})]},e.id))})]})}),a.jsx(h,{delay:1,children:a.jsxs(d,{variant:"elevated",className:"mt-6 sm:mt-8 p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-serif text-brand-primary-text mb-4",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row",children:[a.jsx("span",{className:"text-brand-secondary-text font-medium sm:font-normal",children:"Email:"}),a.jsx("span",{className:"sm:ml-2 text-brand-primary-text break-all",children:null==s?void 0:s.email})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row",children:[a.jsx("span",{className:"text-brand-secondary-text font-medium sm:font-normal",children:"Role:"}),a.jsx("span",{className:"sm:ml-2 text-brand-primary-text capitalize",children:null==s?void 0:s.role})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row",children:[a.jsx("span",{className:"text-brand-secondary-text font-medium sm:font-normal",children:"Email Verified:"}),a.jsx("span",{className:"sm:ml-2 "+((null==s?void 0:s.emailVerified)?"text-green-600":"text-red-600"),children:(null==s?void 0:s.emailVerified)?"Yes":"No"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row",children:[a.jsx("span",{className:"text-brand-secondary-text font-medium sm:font-normal",children:"Name:"}),a.jsx("span",{className:"sm:ml-2 text-brand-primary-text",children:(null==s?void 0:s.firstName)&&(null==s?void 0:s.lastName)?`${s.firstName} ${s.lastName}`:"Not provided"})]})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));export{N as S,y as i};
